apiVersion: v1
kind: ConfigMap
metadata:
  name: olake-ui-config
  namespace: {{ include "olake.namespace" . }}
  annotations: {}
  labels:
    app.kubernetes.io/name: olake-ui
    app.kubernetes.io/instance: {{ .Release.Name }}
    app.kubernetes.io/component: olake-ui
    {{- include "olake.labels" . | nindent 4 }}
data:
  # Beego App Configuration File
  app.conf: |
    appname = olake-server
    httpport = {{ .Values.olakeUI.env.HTTP_PORT | default "8000" }}
    runmode = {{ .Values.olakeUI.env.RUN_MODE | default .Values.global.env.RUN_MODE | default "staging" }}
    autorender = false
    copyrequestbody = true
    EnableDocs = true
    logsdir = ./logger/logs
    sessionon = true

    # Database Configuration
    postgresdb           = ${POSTGRES_DB}
    POSTGRES_DB_USER     = ${POSTGRES_DB_USER}
    POSTGRES_DB_PASSWORD = ${POSTGRES_DB_PASSWORD}
    POSTGRES_DB_HOST     = ${POSTGRES_DB_HOST}
    POSTGRES_DB_PORT     = ${POSTGRES_DB_PORT}
    POSTGRES_DB_NAME     = ${POSTGRES_DB_NAME}
    POSTGRES_DB_SSLMODE  = ${POSTGRES_DB_SSLMODE}
    
    # Temporal Configuration
    TEMPORAL_ADDRESS = temporal.{{ include "olake.namespace" . }}.svc.cluster.local:7233