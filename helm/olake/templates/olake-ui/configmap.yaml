apiVersion: v1
kind: ConfigMap
metadata:
  name: olake-ui-config
  namespace: {{ include "olake.namespace" . }}
  annotations: {}
  labels:
    app.kubernetes.io/name: olake-ui
    app.kubernetes.io/instance: {{ .Release.Name }}
    app.kubernetes.io/component: olake-ui
    {{- include "olake.labels" . | nindent 4 }}
data:
  app.conf: |
    appname = olake-server
    httpport = {{ .Values.olakeUI.env.HTTP_PORT | default "8000" }}
    runmode = {{ .Values.olakeUI.env.RUN_MODE | default .Values.global.env.RUN_MODE | default "staging" }}
    autorender = false
    copyrequestbody = true
    EnableDocs = true
    logsdir = /tmp/olake/logs
    sessionon = true

    # Postgres (must match server required keys)
    OLAKE_POSTGRES_USER     = {{ .Values.postgresql.auth.postgresUser }}
    OLAKE_POSTGRES_PASSWORD = {{ .Values.postgresql.auth.postgresPassword }}
    OLAKE_POSTGRES_HOST     = postgresql.{{ include "olake.namespace" . }}.svc.cluster.local
    OLAKE_POSTGRES_PORT     = 5432
    OLAKE_POSTGRES_DBNAME   = postgres
    OLAKE_POSTGRES_SSLMODE  = disable

    # Temporal
    TEMPORAL_ADDRESS = temporal.{{ include "olake.namespace" . }}.svc.cluster.local:7233